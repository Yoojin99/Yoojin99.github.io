---
title:  "중앙처리장치(CPU) 작동 원리"
excerpt: ""

toc: true
toc_sticky: true
toc_label: "페이지 주요 목차"
header:
  teaser: 
  
  
categories:
  - cs
  
tags:
  - cs-cs
last_modified_at: 2020-10-25
---

CPU(중앙처리장치)는 인간으로 비유하자면 인간의 뇌에 해당하는 부분이다. 가장 핵심적인 역할을 수행하느 부분이다.

연산장치, 제어장치, 레지스터 3가지로 구성된다.

## 1. 연산 장치(ALU)

산술 연산, 논리 연산을 수행한다. (산술논리연산장치 라고도 부른다.)

연산에 필요한 데이터를 레지스터에서 가져오고, 연산한 결과를 다시 레지스터로 보낸다.

## 2. 제어 장치

명령어를 순서대로 실행할 수 있도록 제어하는 장치이다.

주기억 장치에서 프로그램 명령어를 꺼내 해독하고, 결과에 따라 명령어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력 장치로 보낸다.

또 이 장치들이 보낸 신호를 받아 다음에 수행할 동작을 결정한다.

## 3. 레지스터

고속의 기억 장치이다.

명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과들을 임시로 저장한다.

용도에 따라 범용 레지스터와 특수목적 레지스터로 구분한다. CPU 종류에 따라 사용할 수 있는 레지스터 개수, 크기가 다르다.

* 범용 레지스터 : 연산에 필요한 데이터/연산 결과를 임시로 저장
* 특수목적 레지스터 : 특별한 용도로 사용하는 레지스터

### 특수목적 레지스터 중 중요한 것들

* MAR(메모리 주소 레지스터) : 읽기/쓰기 연산을 수행할 주기억장치 주소 저장
* PC(프로그램 카운터) : 다음에 수행할 명령어 주소 저장
* IR(명령어 레지스터) : 현재 실행중인 명령어 저장
* MBR(메모리 버퍼 레지스터) : 주기억장치에서 읽어온 데이터 / 저장할 데이터 임시 저장
* AC(누산기) : 연산 결과 임시 저장

## CPU 동작 순서

1. 주기억장치가 입력장치에서 입력받은 데이터/보조기억 장치에 저장된 프로그램을 읽어온다.
2. CPU는 프로그램을 실행시키기 위해 주기억 장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고 결과를 다시 주기억 장치에 저장한다.
3. 주기억 장치는 처리결과를 보조기억장치에 저장하거나 출력 장치로 보낸다.
4. 제어장치는 1~3 과정에서 명령어가 순서대로 실행될 수 있도록 각 장치를 제어한다.

(읽기) -> (처리) -> (저장)

### 명령어 세트란?

CPU가 실행할 명령어의 집합이다.

연산 코드(Operation code) + 피연산자 (Operand)로 이루어진다. 

* 연산 코드 : 실행할 연산. 연산, 제어, 데이터 전달, 입출력 기능을 가진다.
* 피연산자 : 주소, 숫자/문자/ 논리 데이터 등을 저장한다.

CPU는 프로그램을 실행하기 위해 주기억 장치에서 명령어를 순차적으로 꺼내 해독하고 실행하는 과정을 반복한다.

이때 CPU가 주기억장치에서 한 번에 하나의 명령어를 꺼내 실행하는데 필요한 일련의 활동을 '명령어 사이클'이라고 한다.

명령어 사이클 : 인출/실행/간점/인터럽트 사이클로 나누어진다.

주기억장치의 지정된 주소에서 하나의 명령어를 가져오고, 실행 사이클에서는 명령어를 실행한다. 하나의 명령어 실행이 완료되면 다음 명령어에 대한 인출 사이클이 시작된다.

### 인출 사이클, 실행 사이클에 의한 명령어 처리 과정

인출 사이클에서 가장 중요한 부분은 PC의 값을 증가시키는 것이다.

1. PC에 저장된 주소를 MAR(메모리 주소 레지스터)로 전달
2. 저장된 내용을 토대로 주기억장치의 해당 주소에서 명령어 인출
3. 인출한 명령어를 MBR(메모리 버퍼 레지스터)에 저장
4. 다음 명령어를 인출하기 위해 PC 값 증가
5. MBR에 저장된 내용을 IR(명령어 레지스터)에 전달

```
T0 : MAR ← PC
T1 : MBR ← M[MAR], PC ← PC+1
T2 : IR ← MBR
```

이후는 명령어를 실행하는 과정이다.

```
T0 : MAR ← IR(Addr)
T1 : MBR ← M[MAR]
T2 : AC ← AC + MBR
```

이미 인출이 되었고 명령어만 실행하면 되기 때문에 PC를 증가할 필요가 없다.

