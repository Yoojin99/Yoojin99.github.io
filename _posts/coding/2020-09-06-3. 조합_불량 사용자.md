---
title:  "3. 조합_불량 사용자"
excerpt: ""

categories:
  - coding
tags:
  - 조합
last_modified_at: 
---

## 문제

[문제 링크](https://programmers.co.kr/learn/courses/30/lessons/64064)

## 아쉬웠던 부분

이번 문제는 시간을 오래 잡아먹었다. 조합을 어떻게 구현할 지 고민하는데 시간을 굉장히 많이 썼던 것 같다. 그래서 python 조합 관련 모듈을 찾아보니 코딩테스트같은 곳에서도 사용할 수 있는
조합 생성 모듈이 있었다. 진작 이걸 사용할 걸 그랬다.

1. 순열, 조합을 어떻게 구현하나?

 원래는 반복문을 이용해서 정말 귀찮게 조합을 구현했는데, 이걸 구현하느라 시간이 굉장히 오래 걸렸다.
 
 파이썬에는 **itertools**라는 좋은 모듈이 있다.
 
  1. permutations. 순열
  
  ```python
  from itertools import permutations
  
  for c in permutations(리스트, 숫자):
    # 리스트에 ['a', 'b', 'c'], 숫자에 2가 있으면
    # ('a','b'), ('a','c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c','b') 처럼 모든 경우가 다 나온다.
  ```
  
  2. combinations. 조합
  
  ```python
  from itertools import combinations
  
  for c in permutations(리스트, 숫자):
    # 리스트에 ['a', 'b', 'c'], 숫자에 2가 있으면
    # ('a','b'), ('a','c'), ('b', 'c') 처럼 조합이 다 나온다.
  ```
  
  3. 집합 추가
  
  집합은 단순히 set() 으로 만들어서 선언한다.
 
  ```python
  arr = []
  arr.append(set())
  ```
  
  4. 테스트 케이스의 크기도 굉장히 중요한 지표가 될 수 있다.
  
  실제로 코딩을 할 때 모든 조건의 수를 다 따져서 하나 하나 조건에 부합하는지 체크하는 것은 비효율적이다. 그런데 이 문제에서 테스트 케이스의 크기는 작다. 그래서 모든 조건의 수를 따져보는 것이 더 코딩하기 쉬우면서도 크게 성능을 저하시키지 않는 것이다.


## 풀이

첫번째 풀었던 코드 : 테스트 케이스 5인가 6인가를 제외하고 통과했다. 한 경우에서 시간 초과가 떠서 틀렸다.
굉장히 더럽게 풀었다. 이건 조합 모듈을 이용하지 않고 순수 노가다로 코딩했다.

```python
def solution(user_id, banned_id):
    answer = 0
    
    gazi = []
    
    for i in range(len(banned_id)):
        gazi.append(set())
    
    gazi_index = 0
    
    for bid in banned_id:
        for uid in user_id:
            if len(uid) == len(bid):
                word_index = 0
                while word_index<len(uid):
                    if bid[word_index] == '*':
                        pass
                    elif bid[word_index] != uid[word_index]:
                        break
                    
                    word_index += 1
                    
                if word_index == len(uid):
                    gazi[gazi_index].add(uid)
        gazi_index += 1

    new_gazi = []
    
    total = 1
    
    for g in gazi:
        total *= len(g)
        
    new_gazi = []
    
    for i in range(total):
        new_gazi.append([])
        
    start = total
    
    for g in gazi:
        index = 0
        start = int(start/len(g))

        while index < total:
            for i in g:
                for l in range(start):
                    new_gazi[index].append(i)
                    index += 1
    
    new_gazi = [set(g) for g in new_gazi if len(g) == len(set(g))]
    
    answer_sheet = []
    
    for g in new_gazi:
        if g not in answer_sheet:
            answer_sheet.append(g)
    
    answer = len(answer_sheet)
    
    return answer
```

다른 코드를 참고해서 푼 것 

```python
from itertools import permutations

def check(banned_ids, candidate_users):
    for i in range(len(banned_ids)):
        if len(banned_ids[i]) != len(candidate_users[i]):
            return False
        if isMatchId(banned_ids[i], candidate_users[i]) is False:
            return False
    return True
        
def isMatchId(ban_id, user_id):
    for i in range(len(ban_id)):
        if ban_id[i] == '*': continue
        elif ban_id[i] != user_id[i]:
            return False
    return True
        
def solution(user_id, banned_id):
    answer = 0
    
    ans = list()
    
    for candidate_users in permutations(user_id, len(banned_id)):
        if check(banned_id, candidate_users) is True:
            candidate_users = set(candidate_users)
            if candidate_users not in ans:
                ans.append(candidate_users)
        
    answer = len(ans)
    
    return answer
```
